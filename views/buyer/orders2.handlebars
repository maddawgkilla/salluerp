{{> navbar}}

<link href="https://unpkg.com/bootstrap-table@1.13.4/dist/bootstrap-table.min.css" rel="stylesheet">

<script src="https://unpkg.com/bootstrap-table@1.13.4/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.13.4/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>

<script src="/javascripts/tableExport/jquery.base64.js"></script>
<script src="/javascripts/tableExport/tableExport.js"></script>

<div class="mt-5">
    <div class="content order-table">
        <div class="row">
            <button id="exportTable" class="btn btn-primary">Export CSV</button>
        </div>
        <div id="toolbar">
            <select class="form-control">
                <option value="">Export Basic</option>
                <option value="all">Export All</option>
                <option value="selected">Export Selected</option>
            </select>
        </div>
        <table id="table" data-toggle="table" data-search="true" data-filter-control="true" data-show-export="true"
            data-click-to-select="true" data-toolbar="#toolbar">
            <thead>
                <tr>
                    <th data-field="state" data-checkbox="true"></th>
                    <th data-filter-control="input" data-field="orderNo">Order #</th>
                    <th data-filter-control="select" data-field="shopNo">Shop No.</th>
                    <th data-filter-control="input" data-field="weight">Weight</th>
                    <th data-filter-control="input" data-field="cost">Cost</th>
                    <th data-filter-control="select" data-field="perkg">Per Kg</th>
                    <th data-filter-control="select" data-field="credit">Credit</th>
                    <th data-filter-control="input" data-field="discount">Discount</th>
                    <th data-sortable="true" data-field="createdAt">Created At</th>
                </tr>
            </thead>
            <tbody>
                {{#each orders}}
                <tr>
                    <td class="bs-checkbox "><input name="btSelectItem" type="checkbox"></td>
                    <td>{{this._id}}</td>
                    <td>{{this.shop_no}}</td>
                    <td>{{this.weight}}</td>
                    <td>{{this.cost}}</td>
                    <td>{{this.cost_per_kg}}</td>
                    <td>{{this.is_credit}}</td>
                    <td>{{this.discount}}</td>
                    <td>{{this.created_at}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</div>

<script>
   $(document).ready(function() {
       console.log("JQuery Started");
       $('#exportTable').on('click', function() {
           $('#table').tableExport({
               tableName: 'BuyerExport',
               type: 'csv',
               escape:'true',
               htmlContent:'false',
               consoleLog:'false'
           });
       });
   });
</script>